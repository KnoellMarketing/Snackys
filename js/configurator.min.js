var configurator;!function(t,e,i){"use strict";t.snacky&&!t.snacky.configurator&&(t.snacky.configurator={});var r=function(){this.init()};r.DEFAULTS={input:{id:"a"},action:{compareList:"Vergleichsliste",compareListRemove:"Vergleichsliste.remove"},selector:{navBadgeUpdate:"#shop-nav li.compare-list-menu",navBadgeAppend:"#shop-nav li.cart-menu",boxContainer:"section.box-compare"},modal:{id:"modal-article-dialog",wrapper:"#result-wrapper",wrapper_modal:"#result-wrapper-modal"}},r.prototype={modalShown:!1,modalView:null,constructor:r,init:function(){this.options=r.DEFAULTS,this.gallery=null},load:function(){this.registerConfig(),t("a.filter-collapsible-control").on("click",function(e){e.preventDefault(),t(e.target.getAttribute("href")).toggle()})},isSingleArticle:function(){return t("#buy_form").length>0},getWrapper:function(e){return t(void 0===e?this.options.modal.wrapper:e)},getCurrent:function(t){var e=t.hasClass("variation")?t:t.closest(".variation");return"SELECT"===e.context.tagName&&(e=t.find("option:selected")),e},registerConfig:function(){var e=this,i=t(".product-configuration").closest("form").find('input[type="radio"], input[type="checkbox"], input[type="number"], select');i.length>0&&(i.on("change",function(){e.configurator()}).keypress(function(t){if(13===t.which)return!1}),e.configurator(!0))},configurator:function(e){if(this.isSingleArticle()){var i,r=this,n=t("#cfg-container"),a=t("#product-configuration-sidebar");if(0===n.length)return;a.hasClass("affix")||a.css("width",""),a.css("width",a.width()),t("#buy_form").find('*[data-selected="true"]').attr("checked",!0).attr("selected",!0).attr("data-selected",null),i=t.evo.io().getFormValues("buy_form"),t.evo.io().call("buildConfiguration",[i],r,function(i,n){var a,o,l,c,s,p,f,d,u;if(!i&&(a=n.response).oKonfig_arr)for(d=a.nNettoPreise,r.setPrice(a.fGesamtpreis[d],a.cPreisLocalized[d],a.cPreisString),r.setStockInformation(a.cEstimatedDelivery),t("#content .summary").html(a.cTemplate),o=0;o<a.oKonfig_arr.length;o++)if(p=a.oKonfig_arr[o],s=r.getConfigGroupQuantity(p.kKonfiggruppe),u=r.getConfigGroupQuantityInput(p.kKonfiggruppe),p.bAktiv)for(p.bAnzahl,l=0;l<p.oItem_arr.length;l++)(c=p.oItem_arr[l]).bAktiv&&(c.cBildPfad?r.setConfigItemImage(p.kKonfiggruppe,c.cBildPfad.cPfadKlein):r.setConfigItemImage(p.kKonfiggruppe,p.cBildPfad),r.setConfigItemDescription(p.kKonfiggruppe,c.cBeschreibung),c.bAnzahl?("none"!==s.css("display")||e||u.val(c.fInitial),s.slideDown(200),u.attr("disabled",!1).attr("min",c.fMin).attr("max",c.fMax),((f=u.val())<c.fMin||f>c.fMax)&&u.val(c.fInitial)):(u.attr("min",c.fInitial).attr("max",c.fInitial).val(c.fInitial).attr("disabled",!0),1===c.fInitial?s.slideUp(200):s.slideDown(200)));else r.setConfigItemDescription(p.kKonfiggruppe,""),u.attr("disabled",!0),s.slideUp(200)})}},getConfigGroupQuantity:function(e){return t('.cfg-group[data-id="'+e+'"] .quantity')},getConfigGroupQuantityInput:function(e){return t('.cfg-group[data-id="'+e+'"] .quantity input')},getConfigGroupImage:function(e){return t('.cfg-group[data-id="'+e+'"] .group-image img')},setConfigItemImage:function(e,i){t('.cfg-group[data-id="'+e+'"] .group-image img').attr("src",i).first()},setConfigItemDescription:function(e,i){var r=t('.cfg-group[data-id="'+e+'"] .group-items'),n=r.find("#filter-collapsible_dropdown_"+e),a=r.find(".hidden"),o=r.find('div[id^="filter-collapsible_checkdio"]'),l=r.find("select").attr("multiple");a.length>0&&0===o.length&&i.length>0&&"multiple"!==l?(r.find('a[href="#filter-collapsible_dropdown_'+e+'"]').removeClass("hidden"),n.replaceWith('<div id="filter-collapsible_dropdown_'+e+'" class="collapse top10 panel-body">'+i+"</div>")):0===a.length&&0===o.length&&0===i.length&&"multiple"!==l?(r.find('a[href="#filter-collapsible_dropdown_'+e+'"]').addClass("hidden"),n.addClass("hidden")):0===a.length&&0===o.length&&i.length>0&&"multiple"!==l&&n.replaceWith('<div id="filter-collapsible_dropdown_'+e+'" class="collapse top10 panel-body">'+i+"</div>")},setPrice:function(e,i,r,n){var a=this.getWrapper(n);if(this.isSingleArticle())t("#product-offer .price",a).html(i),r.length>0&&t("#product-offer .price_label",a).html(r);else{var o=t(".price_wrapper",a);t(".price span:first-child",o).html(i),r.length>0&&t(".price_label",o).html(r)}},setStockInformation:function(e,i){var r=this.getWrapper(i);t(".delivery-status .estimated-delivery span",r).html(e)},setStaffelPrice:function(e,i,r){var n=this.getWrapper(r),a=t("#product-offer",n);t.each(i,function(e,i){t(".bulk-price-"+e+" .bulk-price",a).html(i)})},setVPEPrice:function(e,i,r,n){var a=this.getWrapper(n),o=t("#product-offer",a);t(".base-price .value",o).html(e),t.each(r,function(e,i){t(".bulk-price-"+e+" .bulk-base-price",o).html(i)})},setProductNumber:function(e,i){var r=this.getWrapper(i);t('#product-offer span[itemprop="sku"]',r).html(e)},removeStockInfo:function(e){var i,r,n;switch(e.attr("data-type")){case"option":r=e.data("content"),n=t("<div />").append(r),t(n).find(".label-not-available").remove(),r=t(n).html(),e.data("content",r).attr("data-content",r);break;case"radio":1===(i=e.find(".label-not-available")).length&&t(i).remove();break;case"swatch":e.data("bs.tooltip")&&(e.tooltip("destroy"),e.attr("title",e.attr("data-title")))}e.removeAttr("data-stock")}},t.snacky.configurator=new r,t.snacky.start(t.snacky.configurator),configurator=function(){return $v}}(jQuery,document,window);