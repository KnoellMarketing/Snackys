!function(){"use strict";$.snacky&&!$.snacky.checkout&&($.snacky.checkout={});var e=function(){};e.prototype={data:{isLoading:!1,galleryPreviews:4},constructor:e,load:function(){this.adressForm(),this.basics()},basics:function(){$("input[type=submit],button[type=submit]").on("click",function(){$(this).closest("form").find("input:hidden, select:hidden").each(function(){$(this).removeAttr("required")})}),$("#comment").on("change",function(){$("#comment-hidden").val($(this).val())})},adressForm:function(){this.observePLZ("#postcode","#city","#country"),this.observePLZ("#register-shipping_address-postcode","#register-shipping_address-city","#register-shipping_address-country"),$("#checkout_register_shipping_address").on("change",function(){this.checked?$("#select_shipping_address").hide():$("#select_shipping_address").show()}),$("#checkout_create_account_unreg").on("change",function(){this.checked?$("#create_account_data").show():$("#create_account_data").hide()}),$("input[name=kLieferadresse]").on("change",function(){$(this).val()>0?$("#register_shipping_address").hide():$("#register_shipping_address").show()}),$("#choose-way .step-box").click(function(){$("#choose-way .step-box").removeClass("active"),$(this).addClass("active"),$(this).hasClass("login")?($("#existing-customer").removeClass("hidden"),$("#customer").addClass("hidden")):($("#existing-customer").addClass("hidden"),$("#customer").removeClass("hidden")),$(this).hasClass("reg")?($("#checkout_create_account_unreg").prop("checked",!0),$("#create_account_data").show()):$(this).hasClass("guest")&&($("#checkout_create_account_unreg").prop("checked",!1),$("#create_account_data").hide())}),$("#country").on("change",function(){document.getElementById("register-shipping_address-country")&&(null==document.getElementById("register-shipping_address-country").querySelector('[value="'+$(this).val()+'"]')?($("#checkout_register_shipping_address_div").addClass("hidden"),$("#select_shipping_address").show(),$("#checkout_register_shipping_address").prop("checked",!1)):$("#checkout_register_shipping_address_div").removeClass("hidden"))})},observePLZ:function(e,s,t){$(e).on("change",function(){""==$(s).val()&&$.ajax({url:"io.php",data:{io:JSON.stringify({name:"getCitiesByZip",params:["",$(t).val(),$(e).val()]})}}).done(function(e){1==$(e).length&&""==$(s).val()&&$(s).val(e[0])})})},versand:function(){var e,s=this;$("input[name=Versandart]").on("change",function(){$("body").addClass("loading"),$.ajax({url:"bestellvorgang.php?isAjax&kVersandart="+$(this).val()}).done(function(t){$("body").removeClass("loading");var n=$.parseHTML(t,document,!0);e=$(n).find("#fieldset-payment").html(),$("#fieldset-payment").html(e),s.checkPayPalPlus()}).fail(function(){$("body").removeClass("loading"),console.log("Error loading "+url)})})},checkPayPalPlus:function(){if($("#ppp-modal").length){var e=!0;$(".shipping-payments .btn-primary.submit").each(function(){e?e=!1:$(this).hide()})}else $(".shipping-payments .btn-primary.submit").show()}},$.snackyCheckout=new e,$.snackyCheckout.load()}(jQuery);